# 性能测试理论

[![Build Status](https://travis-ci.org/Marco-hui/JavaScript-outline.svg?branch=master)](https://travis-ci.org/Marco-hui/JavaScript-outline)
[![license](https://img.shields.io/github/license/mashape/apistatus.svg)](https://github.com/Marco-hui/JavaScript-outline/blob/master/LICENSE)
[![GitHub release](https://img.shields.io/github/v/release/Marco-hui/JavaScript-outline.svg)](https://github.com/Marco-hui/JavaScript-outline/releases)
[![GitHub stars](https://img.shields.io/github/stars/Marco-hui/JavaScript-outline.svg?style=social&label=Stars)](https://github.com/Marco-hui/JavaScript-outline)


## 理发店模型  
（转载：https://www.jianshu.com/p/ed9caa8d1255，冷冷_十一月）
### 通过理发店模型分析程序运行原理、过程、产生性能问题的原因、性能指标

在我们的这个理发店中，我们事先做了如下的假设：
1. 理发店共有3名理发师；（系统资源、服务器）

2. 每位理发师剪一个发的时间都是1小时；(处理时间)

3. 我们顾客们都是很有时间观念的人而且非常挑剔，他们对于每次光顾理发店时所能容忍的等待时间+剪发时间是3小时，而且等待时间越长，顾客的满意度越低。如果3个小时还不能剪完头发，我们的顾客会立马生气的走人。

通过上面的假设我们不难想象出下面的场景：
场景一：

当理发店内只有1位顾客时，只需要有1名理发师为他提供服务，其他两名理发师可能继续等着，也可能会帮忙打打杂。1小时后，这位顾客剪完头发出门走了。那么在这1个小时里，整个理发店只服务了1位顾客，这位顾客花费在这次剪发的时间是1小时；

场景二：

当理发店内同时有两位顾客时，就会同时有两名理发师在为顾客服务，另外1位发呆或者打杂帮忙。仍然是1小时后，两位顾客剪完头发出门。在这1小时里，理发店服务了两位顾客，这两位顾客花费在剪发的时间均为1小时；

场景三：

很容易理解，当理发店内同时有三位顾客时，理发店可以在1小时内同时服务三位顾客，每位顾客花费在这次剪发的时间仍然是均为1小时；



从上面几个场景中我们可以发现，在理发店同时服务的顾客数量从1位增加到3位的过程中，随着顾客数量的增多，理发店的整体工作效率在提高，但是每位顾客在理发店内所呆的时间并未延长。（当并发用户数小于最佳并发用户数时，随着用户的增加，响应时间并不会增加，只是系统资源利用率增加了）

当然，我们可以假设当只有1位顾客和2位顾客时，空闲的理发师可以帮忙打杂，使得其他理发师的工作效率提高，并使每位顾客的剪发时间小于1小时。不过即使根据这个假设，虽然随着顾客数量的增多，每位顾客的服务时间有所延长，但是这个时间始终还被控制在顾客可接受的范围之内，并且顾客是不需要等待的。

 场景四：

不过随着理发店的生意越来越好，顾客也越来越多，新的场景出现了。假设有一次顾客A、B、C刚进理发店准备剪发，外面一推门又进来了顾客D、E、F。因为A、B、C三位顾客先到，所以D、E、F三位只好坐在长板凳上等着。1小时后，A、B、C三位剪完头发走了，他们每个人这次剪发所花费的时间均为1小时。可是D、E、F三位就没有这么好运，因为他们要先等A、B、C三位剪完才能剪，所以他们每个人这次剪发所花费的时间均为2小时——包括等待1小时和剪发1小时。

通过上面这个场景我们可以发现，对于理发店来说，都是每小时服务三位顾客——第1个小时是A、B、C，第二个小时是D、E、F；但是对于顾客D、E、F来说，“响应时间”延长了。（当并发用户超过最佳并发用户数，随着用户的增加，响应时间会变长）。

 场景五：

在新的场景中，我们假设这次理发店里一次来了9位顾客，根据我们上面的场景，相信你不难推断，这9位顾客中有3位的“响应时间”为1小时，有3位的“响应时间”为2小时（等待1小时+剪发1小时），还有3位的“响应时间”为3小时（等待2小时+剪发1小时）——已经到达用户所能忍受的极限。假如在把这个场景中的顾客数量改为10，那么我们已经可以断定，一定会有1位顾客因为“响应时间”过长而无法忍受，最终离开理发店走了。

场景六：

假设这次理发店里一次来了10位顾客，根据上面的推算，必然存在一位顾客的“响应时间”为4个小时，而之前我们又做过假设3小时已经是顾客忍耐的极限了，所以这个顾客会因为无法忍受等待时间而离开理发店。
